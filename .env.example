# ============================================================================
# SCALIUS COMMERCE LITE - ENVIRONMENT CONFIGURATION
# ============================================================================
# Copy this file to .dev.vars (for Wrangler) or .env (for Node.js)
# Generate secrets with: openssl rand -base64 32
# ============================================================================


# ============================================================================
# DATABASE (Required)
# ============================================================================
# Turso/libSQL database connection
# Create a database at: https://turso.tech
TURSO_DATABASE_URL=libsql://your-database.turso.io
TURSO_AUTH_TOKEN=your-turso-auth-token


# ============================================================================
# AUTHENTICATION (Required)
# ============================================================================
# Better Auth session encryption secret (minimum 32 characters)
# Generate with: openssl rand -base64 32
BETTER_AUTH_SECRET=your-generated-secret-key-here

# Application base URL (used for auth callbacks and redirects)
BETTER_AUTH_URL=http://localhost:4321

# Public base URL for API and CORS
PUBLIC_API_BASE_URL=http://localhost:4321
PUBLIC_API_URL=http://localhost:4321/api/v1


# ============================================================================
# EMAIL (Required for production)
# ============================================================================
# Resend API for transactional emails (2FA codes, password reset)
# Sign up at: https://resend.com
# 1. Verify your sender domain in Resend dashboard
# 2. Create an API key and add it below
RESEND_API_KEY=re_xxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Sender email address (must be from a verified domain in Resend)
EMAIL_SENDER=noreply@yourdomain.com


# ============================================================================
# STOREFRONT API AUTH (Required)
# ============================================================================
# Machine-to-machine API token for protected Hono endpoints
# Generate with: openssl rand -base64 48
API_TOKEN=your-api-token-here

# JWT signing secret for storefront API authentication
# Generate with: openssl rand -base64 48
JWT_SECRET=your-jwt-secret-here


# ============================================================================
# CLOUDFLARE R2 STORAGE (Required for media uploads)
# ============================================================================
# Get these from: Cloudflare Dashboard > R2 > Manage R2 API Tokens
R2_ACCOUNT_ID=your-cloudflare-account-id
R2_ACCESS_KEY_ID=your-r2-access-key
R2_SECRET_ACCESS_KEY=your-r2-secret-key
R2_BUCKET_NAME=your-bucket-name
R2_PUBLIC_URL=https://your-r2-public-url.com


# ============================================================================
# REDIS CACHING (Recommended for production)
# ============================================================================
# Upstash Redis for API response caching
# Create a database at: https://upstash.com
# Falls back to in-memory cache if not configured
UPSTASH_REDIS_REST_URL=https://your-redis.upstash.io
UPSTASH_REDIS_REST_TOKEN=your-upstash-token

# Cache key prefix (useful for multi-project setups)
PROJECT_CACHE_PREFIX=scalius


# ============================================================================
# CDN & SECURITY (Optional)
# ============================================================================
# CDN domain for images (used in CSP headers)
CDN_DOMAIN_URL=cdn.yourdomain.com

# Additional domains allowed in CSP and CORS (comma-separated)
CSP_ALLOWED=yourdomain.com,api.yourdomain.com,scalius.com,connect.facebook.net,facebook.com,firebaseinstallations.googleapis.com,www.gstatic.com


# ============================================================================
# EXTERNAL STOREFRONT CACHE PURGE (Optional)
# ============================================================================
# If you have a separate storefront, configure cache purge endpoint
PURGE_URL=https://your-storefront.com/api/purge
PURGE_TOKEN=your-purge-token


# ============================================================================
# SEARCH (Optional)
# ============================================================================
# Meilisearch reindex authentication
SERVICE_PASSWORD_MEILISEARCH=your-meilisearch-password


# ============================================================================
# NOTES
# ============================================================================
#
# FIREBASE NOTIFICATIONS:
#   Firebase Cloud Messaging is configured via the admin dashboard at
#   Settings > Notifications. No environment variables needed.
#
# OPENROUTER AI:
#   OpenRouter API key is configured via the admin dashboard at
#   Settings > AI. Stored securely in the database.
#
# FIRST-TIME SETUP:
#   1. Configure database and auth variables above
#   2. Run: pnpm install && pnpm db:sync
#   3. Start: pnpm dev
#   4. Navigate to /admin to create the first admin account
#   5. Complete mandatory 2FA setup (authenticator app or email)
#
